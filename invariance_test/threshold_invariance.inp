TITLE: Longitudinal CFA Threshold invariance across waves (K=2)

DATA:
  FILE = recoded_only_sc_pa_cov.dat;

VARIABLE:
  Names are
       pttype2 nh2 bovwt1 covwt1 dovwt1 eovwt1 fovwt1 govwt1 sptn00 sc3thac
       sc3tcom sc3obey sc3dist sc3temp sc3rest sc3fidg sc5thac sc5tcom sc5obey
       sc5dist sc5temp sc5rest sc5fidg sc5lyin sc7thac sc7tcom sc7obey sc7dist
       sc7temp sc7rest sc7fidg sc7lyin sc11thac sc11tcom sc11obey sc11dist
       sc11temp sc11rest sc11fidg sc11lyin sc14thac sc14tcom sc14obey sc14dist
       sc14temp sc14rest sc14fidg sc14lyin sc17thac sc17tcom sc17obey sc17dist
       sc17temp sc17rest sc17fidg sc17lyin ignore5 smack5 shout5 bedroom5
       treats5 telloff5 bribe5 reason5 rindoor5 dinner5 close5 read5 story5
       music5 paint5 active5 games5 park5 ignore7 smack7 shout7 bedroom7
       treats7 telloff7 bribe7 reason7 rindoor7 dinner7 close7 read7 story7
       music7 paint7 active7 games7 park7 tvrules7 bedroom11 treats11 reason11
       close11 active11 games11 pwhere14 pwho14 pwhat14 cmwhere14 cmwho14
       cmwhat14 cmwhere17 cmtback17 pwhere17 ptback17 livewp17 pedu bpedu
       sex race brace bmarried incomec incomel incomef lbw namhapna0 namunfaa0
       nambrusa0 namfeeda0 naminjua0 nambatha0 namwarya0 nambshya0 namfreta0
       namsleea0 nammilka0 namsltia0 namnapsa0 namsofoa0 inftempr inftemp
       dfpw dupd dupw hfae coga scoga age3 age5 age7 age11 age14 age17 mcsid;
  USEVARIABLES =
      sc3thac sc3tcom sc3obey sc3dist sc3temp sc3rest sc3fidg
      sc5thac sc5tcom sc5obey sc5dist sc5temp sc5rest sc5fidg
      sc7thac sc7tcom sc7obey sc7dist sc7temp sc7rest sc7fidg
      sc11thac sc11tcom sc11obey sc11dist sc11temp sc11rest sc11fidg
      sc14thac sc14tcom sc14obey sc14dist sc14temp sc14rest sc14fidg
      sc17thac sc17tcom sc17obey sc17dist sc17temp sc17rest sc17fidg;
  CATEGORICAL = ALL;
  MISSING ARE ALL (-9999);
  IDVARIABLE IS mcsid;

  ! ---- Complex survey design (MCS) ----
    STRATIFICATION = pttype2;
    CLUSTER       = sptn00;
    WEIGHT        = govwt1;
    SUBPOPULATION = (govwt1 > 0);

  ANALYSIS:
  TYPE = COMPLEX;
  ESTIMATOR = WLSMV;
  PARAMETERIZATION = DELTA;
  DIFFTEST = cfg_3to17.dif;

MODEL:
  ! factors same as configural
  SC_3  BY sc3thac* sc3tcom sc3obey 
sc3dist sc3temp sc3rest sc3fidg;
  SC_5  BY sc5thac* sc5tcom sc5obey 
sc5dist sc5temp sc5rest sc5fidg;
  SC_7  BY sc7thac* sc7tcom sc7obey 
sc7dist sc7temp sc7rest sc7fidg;
  SC_11 BY sc11thac* sc11tcom sc11obey 
sc11dist sc11temp sc11rest sc11fidg;
  SC_14 BY sc14thac* sc14tcom sc14obey 
sc14dist sc14temp sc14rest sc14fidg;
  SC_17 BY sc17thac* sc17tcom sc17obey 
sc17dist sc17temp sc17rest sc17fidg;

  SC_3-SC_17@1;
  [SC_3-SC_17@0];

  ! equal thresholds across the 6 waves (2 thresholds per 3-category item)
  [sc3thac$1] (t_thac1);  [sc5thac$1] (t_thac1);  [sc7thac$1] (t_thac1);  
[sc11thac$1] (t_thac1);  [sc14thac$1] (t_thac1);  [sc17thac$1] (t_thac1);
  [sc3thac$2] (t_thac2);  [sc5thac$2] (t_thac2);  [sc7thac$2] (t_thac2);  
[sc11thac$2] (t_thac2);  [sc14thac$2] (t_thac2);  [sc17thac$2] (t_thac2);

  [sc3tcom$1](t_tcom1);  [sc5tcom$1](t_tcom1);  [sc7tcom$1](t_tcom1);  
[sc11tcom$1](t_tcom1);  [sc14tcom$1](t_tcom1);  [sc17tcom$1](t_tcom1);
  [sc3tcom$2](t_tcom2);  [sc5tcom$2](t_tcom2);  [sc7tcom$2](t_tcom2);  
[sc11tcom$2](t_tcom2);  [sc14tcom$2](t_tcom2);  [sc17tcom$2](t_tcom2);

  [sc3obey$1](t_obey1);  [sc5obey$1](t_obey1);  [sc7obey$1](t_obey1);  
[sc11obey$1](t_obey1);  [sc14obey$1](t_obey1);  [sc17obey$1](t_obey1);
  [sc3obey$2](t_obey2);  [sc5obey$2](t_obey2);  [sc7obey$2](t_obey2);  
[sc11obey$2](t_obey2);  [sc14obey$2](t_obey2);  [sc17obey$2](t_obey2);

  [sc3dist$1](t_dist1);  [sc5dist$1](t_dist1);  [sc7dist$1](t_dist1);  
[sc11dist$1](t_dist1);  [sc14dist$1](t_dist1);  [sc17dist$1](t_dist1);
  [sc3dist$2](t_dist2);  [sc5dist$2](t_dist2);  [sc7dist$2](t_dist2);  
[sc11dist$2](t_dist2);  [sc14dist$2](t_dist2);  [sc17dist$2](t_dist2);

  [sc3temp$1](t_temp1);  [sc5temp$1](t_temp1);  [sc7temp$1](t_temp1);  
[sc11temp$1](t_temp1);  [sc14temp$1](t_temp1);  [sc17temp$1](t_temp1);
  [sc3temp$2](t_temp2);  [sc5temp$2](t_temp2);  [sc7temp$2](t_temp2);  
[sc11temp$2](t_temp2);  [sc14temp$2](t_temp2);  [sc17temp$2](t_temp2);

  [sc3rest$1](t_rest1);  [sc5rest$1](t_rest1);  [sc7rest$1](t_rest1);  
[sc11rest$1](t_rest1);  [sc14rest$1](t_rest1);  [sc17rest$1](t_rest1);
  [sc3rest$2](t_rest2);  [sc5rest$2](t_rest2);  [sc7rest$2](t_rest2);  
[sc11rest$2](t_rest2);  [sc14rest$2](t_rest2);  [sc17rest$2](t_rest2);

  [sc3fidg$1](t_fidg1);  [sc5fidg$1](t_fidg1);  [sc7fidg$1](t_fidg1);  
[sc11fidg$1](t_fidg1);  [sc14fidg$1](t_fidg1);  [sc17fidg$1](t_fidg1);
  [sc3fidg$2](t_fidg2);  [sc5fidg$2](t_fidg2);  [sc7fidg$2](t_fidg2);  
[sc11fidg$2](t_fidg2);  [sc14fidg$2](t_fidg2);  [sc17fidg$2](t_fidg2);

! --------- Adjacent correlated uniquenesses (same as A) ---------
  sc3thac WITH sc5thac;  sc5thac WITH sc7thac;  sc7thac WITH sc11thac; 
sc11thac WITH sc14thac; sc14thac WITH sc17thac;
  sc3tcom WITH sc5tcom;  sc5tcom WITH sc7tcom;  sc7tcom WITH sc11tcom; 
sc11tcom WITH sc14tcom; sc14tcom WITH sc17tcom;
  sc3obey WITH sc5obey;  sc5obey WITH sc7obey;  sc7obey WITH sc11obey; 
sc11obey WITH sc14obey; sc14obey WITH sc17obey;
  sc3dist WITH sc5dist;  sc5dist WITH sc7dist;  sc7dist WITH sc11dist; 
sc11dist WITH sc14dist; sc14dist WITH sc17dist;
  sc3temp WITH sc5temp;  sc5temp WITH sc7temp;  sc7temp WITH sc11temp; 
sc11temp WITH sc14temp; sc14temp WITH sc17temp;
  sc3rest WITH sc5rest;  sc5rest WITH sc7rest;  sc7rest WITH sc11rest; 
sc11rest WITH sc14rest; sc14rest WITH sc17rest;
  sc3fidg WITH sc5fidg;  sc5fidg WITH sc7fidg;  sc7fidg WITH sc11fidg; 
sc11fidg WITH sc14fidg; sc14fidg WITH sc17fidg;

OUTPUT: STANDARDIZED MODINDICES(10) TECH1 TECH4;
SAVEDATA: DIFFTEST = thr_3to17.dif;  ! save for the next step